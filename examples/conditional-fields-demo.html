<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ¡ä»¶å­—æ®µå’Œè¡¨å•åˆ†ç»„æ¼”ç¤º - @ldesign/form</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --ldesign-brand-color: #722ED1;
      --ldesign-success-color: #52c41a;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    .page-header {
      background: #fff;
      padding: 24px;
      border-radius: 4px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 24px;
    }

    .page-header h1 {
      font-size: 24px;
      color: var(--ldesign-brand-color);
      margin-bottom: 8px;
    }

    .form-container {
      background: #fff;
      border-radius: 4px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 24px;
    }

    .form-group {
      border-bottom: 1px solid #f0f0f0;
    }

    .form-group:last-child {
      border-bottom: none;
    }

    .form-group-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 24px;
      background: #fafafa;
      cursor: pointer;
      user-select: none;
      transition: all 0.3s;
    }

    .form-group-header:hover {
      background: #f5f5f5;
    }

    .form-group-title {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 16px;
      font-weight: 600;
      color: rgba(0, 0, 0, 0.85);
    }

    .form-group-icon {
      font-size: 20px;
    }

    .form-group-arrow {
      font-size: 14px;
      color: rgba(0, 0, 0, 0.45);
      transition: transform 0.3s;
    }

    .form-group.expanded .form-group-arrow {
      transform: rotate(90deg);
    }

    .form-group-body {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
    }

    .form-group.expanded .form-group-body {
      max-height: 2000px;
    }

    .form-group-content {
      padding: 24px;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .form-item {
      margin-bottom: 16px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-size: 14px;
      font-weight: 500;
      color: rgba(0, 0, 0, 0.85);
    }

    .form-input,
    .form-select {
      width: 100%;
      padding: 8px 12px;
      font-size: 14px;
      border: 1px solid #d9d9d9;
      border-radius: 4px;
      outline: none;
      transition: all 0.3s;
    }

    .form-input:focus,
    .form-select:focus {
      border-color: var(--ldesign-brand-color);
      box-shadow: 0 0 0 2px rgba(114, 46, 209, 0.1);
    }

    .switch-field {
      display: inline-flex;
      align-items: center;
      gap: 12px;
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 44px;
      height: 22px;
      background: rgba(0, 0, 0, 0.25);
      border-radius: 11px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .switch.checked {
      background: var(--ldesign-brand-color);
    }

    .switch-handle {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 18px;
      height: 18px;
      background: #fff;
      border-radius: 50%;
      transition: all 0.3s;
    }

    .switch.checked .switch-handle {
      left: 22px;
    }

    .conditional-field {
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .btn {
      padding: 8px 16px;
      font-size: 14px;
      border: 1px solid #d9d9d9;
      border-radius: 4px;
      background: #fff;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-primary {
      background: var(--ldesign-brand-color);
      border-color: var(--ldesign-brand-color);
      color: #fff;
    }

    .btn-primary:hover {
      background: #5c24a8;
    }

    .form-actions {
      display: flex;
      gap: 12px;
      padding: 24px;
      background: #fafafa;
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="page-header">
      <h1>ğŸ¯ æ¡ä»¶å­—æ®µå’Œè¡¨å•åˆ†ç»„æ¼”ç¤º</h1>
      <p>å±•ç¤ºæ ¹æ®å­—æ®µå€¼åŠ¨æ€æ˜¾ç¤º/éšè—å­—æ®µï¼Œä»¥åŠè¡¨å•åˆ†ç»„æŠ˜å å±•å¼€åŠŸèƒ½</p>
    </div>

    <!-- è¡¨å• -->
    <div class="form-container">
      <!-- åŸºæœ¬ä¿¡æ¯ç»„ -->
      <div class="form-group expanded" id="group-basic">
        <div class="form-group-header" onclick="toggleGroup('basic')">
          <div class="form-group-title">
            <span class="form-group-icon">ğŸ‘¤</span>
            <span>åŸºæœ¬ä¿¡æ¯</span>
          </div>
          <span class="form-group-arrow">â–¶</span>
        </div>
        <div class="form-group-body">
          <div class="form-group-content">
            <div class="form-grid">
              <div class="form-item">
                <label class="form-label">ç”¨æˆ·å</label>
                <input type="text" id="username" class="form-input" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" />
              </div>

              <div class="form-item">
                <label class="form-label">é‚®ç®±</label>
                <input type="email" id="email" class="form-input" placeholder="è¯·è¾“å…¥é‚®ç®±" />
              </div>

              <div class="form-item">
                <label class="form-label">æ€§åˆ«</label>
                <select id="gender" class="form-select">
                  <option value="">è¯·é€‰æ‹©</option>
                  <option value="male">ç”·</option>
                  <option value="female">å¥³</option>
                  <option value="other">å…¶ä»–</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- å·¥ä½œä¿¡æ¯ç»„ï¼ˆæ¡ä»¶æ˜¾ç¤ºï¼‰ -->
      <div class="form-group expanded" id="group-work">
        <div class="form-group-header" onclick="toggleGroup('work')">
          <div class="form-group-title">
            <span class="form-group-icon">ğŸ’¼</span>
            <span>å·¥ä½œä¿¡æ¯</span>
          </div>
          <span class="form-group-arrow">â–¶</span>
        </div>
        <div class="form-group-body">
          <div class="form-group-content">
            <div class="form-item" style="margin-bottom: 20px;">
              <div class="switch-field">
                <div id="hasJobSwitch" class="switch">
                  <div class="switch-handle"></div>
                </div>
                <label class="form-label" style="margin: 0;">æ˜¯å¦æœ‰å·¥ä½œ</label>
              </div>
            </div>

            <!-- æ¡ä»¶æ˜¾ç¤ºçš„å­—æ®µ -->
            <div id="jobFields" style="display: none;">
              <div class="conditional-field">
                <div class="form-grid">
                  <div class="form-item">
                    <label class="form-label">å…¬å¸åç§°</label>
                    <input type="text" id="company" class="form-input" placeholder="è¯·è¾“å…¥å…¬å¸åç§°" />
                  </div>

                  <div class="form-item">
                    <label class="form-label">èŒä½</label>
                    <input type="text" id="position" class="form-input" placeholder="è¯·è¾“å…¥èŒä½" />
                  </div>

                  <div class="form-item">
                    <label class="form-label">è¡Œä¸š</label>
                    <select id="industry" class="form-select">
                      <option value="">è¯·é€‰æ‹©</option>
                      <option value="it">äº’è”ç½‘</option>
                      <option value="finance">é‡‘è</option>
                      <option value="education">æ•™è‚²</option>
                      <option value="other">å…¶ä»–</option>
                    </select>
                  </div>

                  <!-- å…¶ä»–è¡Œä¸šï¼ˆäºŒçº§æ¡ä»¶æ˜¾ç¤ºï¼‰ -->
                  <div class="form-item" id="otherIndustryField" style="display: none;">
                    <label class="form-label">è¯·è¯´æ˜è¡Œä¸š</label>
                    <input type="text" id="otherIndustry" class="form-input" placeholder="è¯·è¾“å…¥å…·ä½“è¡Œä¸š" />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- é…é€ä¿¡æ¯ç»„ï¼ˆæ¡ä»¶æ˜¾ç¤ºï¼‰ -->
      <div class="form-group expanded" id="group-shipping">
        <div class="form-group-header" onclick="toggleGroup('shipping')">
          <div class="form-group-title">
            <span class="form-group-icon">ğŸšš</span>
            <span>é…é€ä¿¡æ¯</span>
          </div>
          <span class="form-group-arrow">â–¶</span>
        </div>
        <div class="form-group-body">
          <div class="form-group-content">
            <div class="form-item">
              <label class="form-label">é…é€æ–¹å¼</label>
              <select id="shippingMethod" class="form-select">
                <option value="">è¯·é€‰æ‹©</option>
                <option value="express">å¿«é€’é…é€</option>
                <option value="pickup">é—¨åº—è‡ªæ</option>
              </select>
            </div>

            <!-- å¿«é€’é…é€ç›¸å…³å­—æ®µ -->
            <div id="expressFields" style="display: none;">
              <div class="conditional-field">
                <div class="form-grid">
                  <div class="form-item">
                    <label class="form-label">æ”¶è´§äºº</label>
                    <input type="text" id="receiverName" class="form-input" placeholder="è¯·è¾“å…¥æ”¶è´§äººå§“å" />
                  </div>

                  <div class="form-item">
                    <label class="form-label">è”ç³»ç”µè¯</label>
                    <input type="tel" id="receiverPhone" class="form-input" placeholder="è¯·è¾“å…¥è”ç³»ç”µè¯" />
                  </div>

                  <div class="form-item" style="grid-column: 1 / -1;">
                    <label class="form-label">æ”¶è´§åœ°å€</label>
                    <input type="text" id="receiverAddress" class="form-input" placeholder="è¯·è¾“å…¥è¯¦ç»†åœ°å€" />
                  </div>
                </div>
              </div>
            </div>

            <!-- é—¨åº—è‡ªæç›¸å…³å­—æ®µ -->
            <div id="pickupFields" style="display: none;">
              <div class="conditional-field">
                <div class="form-grid">
                  <div class="form-item">
                    <label class="form-label">è‡ªæé—¨åº—</label>
                    <select id="pickupStore" class="form-select">
                      <option value="">è¯·é€‰æ‹©é—¨åº—</option>
                      <option value="store1">æœé˜³åº—</option>
                      <option value="store2">æµ·æ·€åº—</option>
                      <option value="store3">è¥¿åŸåº—</option>
                    </select>
                  </div>

                  <div class="form-item">
                    <label class="form-label">è‡ªææ—¶é—´</label>
                    <select id="pickupTime" class="form-select">
                      <option value="">è¯·é€‰æ‹©æ—¶é—´</option>
                      <option value="morning">ä¸Šåˆ 9:00-12:00</option>
                      <option value="afternoon">ä¸‹åˆ 14:00-18:00</option>
                      <option value="evening">æ™šä¸Š 18:00-21:00</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- æ”¯ä»˜ä¿¡æ¯ç»„ -->
      <div class="form-group" id="group-payment">
        <div class="form-group-header" onclick="toggleGroup('payment')">
          <div class="form-group-title">
            <span class="form-group-icon">ğŸ’³</span>
            <span>æ”¯ä»˜ä¿¡æ¯</span>
          </div>
          <span class="form-group-arrow">â–¶</span>
        </div>
        <div class="form-group-body">
          <div class="form-group-content">
            <div class="form-item">
              <label class="form-label">æ”¯ä»˜æ–¹å¼</label>
              <select id="paymentMethod" class="form-select">
                <option value="">è¯·é€‰æ‹©</option>
                <option value="alipay">æ”¯ä»˜å®</option>
                <option value="wechat">å¾®ä¿¡æ”¯ä»˜</option>
                <option value="card">é“¶è¡Œå¡</option>
              </select>
            </div>

            <!-- é“¶è¡Œå¡æ”¯ä»˜ç›¸å…³å­—æ®µ -->
            <div id="cardFields" style="display: none;">
              <div class="conditional-field">
                <div class="form-grid">
                  <div class="form-item">
                    <label class="form-label">å¡å·</label>
                    <input type="text" id="cardNumber" class="form-input" placeholder="è¯·è¾“å…¥é“¶è¡Œå¡å·" maxlength="19" />
                  </div>

                  <div class="form-item">
                    <label class="form-label">æŒå¡äººå§“å</label>
                    <input type="text" id="cardHolder" class="form-input" placeholder="è¯·è¾“å…¥æŒå¡äººå§“å" />
                  </div>

                  <div class="form-item">
                    <label class="form-label">æœ‰æ•ˆæœŸ</label>
                    <input type="text" id="cardExpiry" class="form-input" placeholder="MM/YY" maxlength="5" />
                  </div>

                  <div class="form-item">
                    <label class="form-label">CVV</label>
                    <input type="text" id="cardCVV" class="form-input" placeholder="***" maxlength="3" />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- æ“ä½œæŒ‰é’® -->
      <div class="form-actions">
        <button type="button" id="submitBtn" class="btn btn-primary">æäº¤</button>
        <button type="button" id="resetBtn" class="btn">é‡ç½®</button>
        <button type="button" class="btn" onclick="expandAll()">å…¨éƒ¨å±•å¼€</button>
        <button type="button" class="btn" onclick="collapseAll()">å…¨éƒ¨æ”¶èµ·</button>
      </div>
    </div>

    <!-- æ˜¾ç¤ºæ”¶é›†çš„æ•°æ® -->
    <div class="section-card"
      style="background: #fff; padding: 24px; border-radius: 4px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);">
      <h3 style="margin-bottom: 16px;">ğŸ“Š è¡¨å•æ•°æ®</h3>
      <pre id="formData"
        style="padding: 16px; background: #f5f5f5; border-radius: 4px; font-size: 13px; overflow-x: auto;">
æœªæäº¤
      </pre>
    </div>
  </div>

  <script type="module">
    import { createForm } from '../src/core/form-core.js'

    // è¡¨å•æ•°æ®
    const formData = {
      username: '',
      email: '',
      gender: '',
      hasJob: false,
      company: '',
      position: '',
      industry: '',
      otherIndustry: '',
      shippingMethod: '',
      receiverName: '',
      receiverPhone: '',
      receiverAddress: '',
      pickupStore: '',
      pickupTime: '',
      paymentMethod: '',
      cardNumber: '',
      cardHolder: '',
      cardExpiry: '',
      cardCVV: ''
    }

    // åˆ›å»ºè¡¨å•
    const form = createForm({
      initialValues: formData,
      onSubmit: async (values) => {
        collectAllData()
        document.getElementById('formData').textContent = JSON.stringify(formData, null, 2)
        console.log('æäº¤æ•°æ®:', formData)
      }
    })

    // åˆ†ç»„å±•å¼€/æ”¶èµ·
    window.toggleGroup = (groupName) => {
      const group = document.getElementById(`group-${groupName}`)
      group.classList.toggle('expanded')
    }

    window.expandAll = () => {
      document.querySelectorAll('.form-group').forEach(group => {
        group.classList.add('expanded')
      })
    }

    window.collapseAll = () => {
      document.querySelectorAll('.form-group').forEach(group => {
        group.classList.remove('expanded')
      })
    }

    // æ¡ä»¶å­—æ®µ - æ˜¯å¦æœ‰å·¥ä½œ
    const hasJobSwitch = document.getElementById('hasJobSwitch')
    const jobFields = document.getElementById('jobFields')

    hasJobSwitch.addEventListener('click', function () {
      formData.hasJob = !formData.hasJob
      this.classList.toggle('checked', formData.hasJob)

      if (formData.hasJob) {
        jobFields.style.display = 'block'
      } else {
        jobFields.style.display = 'none'
        // æ¸…ç©ºå·¥ä½œç›¸å…³å­—æ®µ
        document.getElementById('company').value = ''
        document.getElementById('position').value = ''
        document.getElementById('industry').value = ''
        document.getElementById('otherIndustry').value = ''
        document.getElementById('otherIndustryField').style.display = 'none'
      }
    })

    // äºŒçº§æ¡ä»¶å­—æ®µ - å…¶ä»–è¡Œä¸š
    document.getElementById('industry').addEventListener('change', (e) => {
      const otherField = document.getElementById('otherIndustryField')

      if (e.target.value === 'other') {
        otherField.style.display = 'block'
      } else {
        otherField.style.display = 'none'
        document.getElementById('otherIndustry').value = ''
      }
    })

    // æ¡ä»¶å­—æ®µ - é…é€æ–¹å¼
    const shippingMethodSelect = document.getElementById('shippingMethod')
    const expressFields = document.getElementById('expressFields')
    const pickupFields = document.getElementById('pickupFields')

    shippingMethodSelect.addEventListener('change', (e) => {
      const method = e.target.value

      expressFields.style.display = 'none'
      pickupFields.style.display = 'none'

      if (method === 'express') {
        expressFields.style.display = 'block'
      } else if (method === 'pickup') {
        pickupFields.style.display = 'block'
      }

      // æ¸…ç©ºæœªé€‰ä¸­æ–¹å¼çš„å­—æ®µ
      if (method !== 'express') {
        document.getElementById('receiverName').value = ''
        document.getElementById('receiverPhone').value = ''
        document.getElementById('receiverAddress').value = ''
      }
      if (method !== 'pickup') {
        document.getElementById('pickupStore').value = ''
        document.getElementById('pickupTime').value = ''
      }
    })

    // æ¡ä»¶å­—æ®µ - æ”¯ä»˜æ–¹å¼
    const paymentMethodSelect = document.getElementById('paymentMethod')
    const cardFields = document.getElementById('cardFields')

    paymentMethodSelect.addEventListener('change', (e) => {
      const method = e.target.value

      if (method === 'card') {
        cardFields.style.display = 'block'
      } else {
        cardFields.style.display = 'none'
        // æ¸…ç©ºé“¶è¡Œå¡å­—æ®µ
        document.getElementById('cardNumber').value = ''
        document.getElementById('cardHolder').value = ''
        document.getElementById('cardExpiry').value = ''
        document.getElementById('cardCVV').value = ''
      }
    })

    // æäº¤è¡¨å•
    document.getElementById('submitBtn').addEventListener('click', async () => {
      await form.submit()
    })

    // é‡ç½®è¡¨å•
    document.getElementById('resetBtn').addEventListener('click', () => {
      form.reset()

      // é‡ç½®æ‰€æœ‰è¾“å…¥
      document.querySelectorAll('.form-input, .form-select').forEach(el => {
        el.value = ''
      })

      // é‡ç½®å¼€å…³
      hasJobSwitch.classList.remove('checked')
      formData.hasJob = false

      // éšè—æ¡ä»¶å­—æ®µ
      jobFields.style.display = 'none'
      expressFields.style.display = 'none'
      pickupFields.style.display = 'none'
      cardFields.style.display = 'none'
      document.getElementById('otherIndustryField').style.display = 'none'

      // æ¸…ç©ºæ˜¾ç¤ºæ•°æ®
      document.getElementById('formData').textContent = 'æœªæäº¤'

      console.log('è¡¨å•å·²é‡ç½®')
    })

    // æ”¶é›†æ‰€æœ‰æ•°æ®
    function collectAllData() {
      formData.username = document.getElementById('username').value
      formData.email = document.getElementById('email').value
      formData.gender = document.getElementById('gender').value
      formData.company = document.getElementById('company').value
      formData.position = document.getElementById('position').value
      formData.industry = document.getElementById('industry').value
      formData.otherIndustry = document.getElementById('otherIndustry').value
      formData.shippingMethod = document.getElementById('shippingMethod').value
      formData.receiverName = document.getElementById('receiverName').value
      formData.receiverPhone = document.getElementById('receiverPhone').value
      formData.receiverAddress = document.getElementById('receiverAddress').value
      formData.pickupStore = document.getElementById('pickupStore').value
      formData.pickupTime = document.getElementById('pickupTime').value
      formData.paymentMethod = document.getElementById('paymentMethod').value
      formData.cardNumber = document.getElementById('cardNumber').value
      formData.cardHolder = document.getElementById('cardHolder').value
      formData.cardExpiry = document.getElementById('cardExpiry').value
      formData.cardCVV = document.getElementById('cardCVV').value
    }

    console.log('ğŸ¯ æ¡ä»¶å­—æ®µå’Œè¡¨å•åˆ†ç»„æ¼”ç¤ºå·²åŠ è½½')
  </script>
</body>

</html>


